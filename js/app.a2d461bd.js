(function(){"use strict";var e={576:function(e,t,n){var o=n(963),r=n(252);function u(e,t,n,o,u,a){var s=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(s)}var a=n(582),s=n(577),i=n(262),c=n(686),l=n(119),d={class:"grid place-items-center h-96"},f={key:0},v={key:1,class:"text-center text-black bg-red-500 p-4 rounded-md shadow-lg max-w-md mx-auto mt-4 font-bold"},p={key:1},h={key:0,class:"fixed top-0 right-0 text-customGreen p-4 font-inter text-xs font-normal leading-normal"},g={key:2},m=(0,r.aZ)({__name:"Login",setup:function(e){var t=this,n=(0,i.iH)(!1),o=(0,i.iH)(""),u=(0,i.iH)(!1);(0,r.bv)((function(){return(0,a.mG)(t,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){return u.value="undefined"!==typeof window.ethereum,[2]}))}))}));var m=(0,l.tv)(),w=function(){m.push("/quizz")},b=function(){return(0,a.mG)(t,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:if(!u.value)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.ethereum.request({method:"eth_requestAccounts"})];case 2:return e=r.sent(),o.value=c.K(e[0]),n.value=!0,y(),[3,4];case 3:return t=r.sent(),console.error("Failed to connect to Metamask",t),[3,4];case 4:return[2]}}))}))},y=function(){return(0,a.mG)(t,void 0,void 0,(function(){var e,t,n,r,u,s,i,c,l,d,f,v,p;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),e={Accept:"application.json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"},t=o.value,n="https://backend-quiz-dot-tools-303211.nw.r.appspot.com/auth/message/".concat(t),[4,fetch(n,{method:"GET",headers:e,mode:"cors",cache:"default"})];case 1:return r=a.sent(),[4,r.json()];case 2:return u=a.sent(),s=u.message,[4,window.ethereum.request({method:"personal_sign",params:[s,t]})];case 3:return i=a.sent(),console.log("adresse wallet",t),console.log("signature",i),c=new URL("https://backend-quiz-dot-tools-303211.nw.r.appspot.com/auth"),l={address:t,signature:i},[4,fetch(c,{method:"POST",headers:e,mode:"cors",body:JSON.stringify(l),cache:"default"})];case 4:return d=a.sent(),[4,d.json()];case 5:return f=a.sent(),console.log("resPost",f),v=f.access_token,localStorage.setItem("jwt",v),console.log("token",v),[3,7];case 6:return p=a.sent(),console.error(p),[3,7];case 7:return[2]}}))}))};return function(e,t){return(0,r.wg)(),(0,r.iD)("div",d,[n.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[u.value?((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:b,class:"px-4 py-2 rounded bg-gradient-to-r from-blue-500 to-blue-600 text-gray-50 font-semibold"}," Connect Wallet ")):((0,r.wg)(),(0,r.iD)("div",v," Please Install Metamask Extension "))])),n.value?((0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("button",{onClick:w,class:"px-4 py-2 rounded bg-gradient-to-r from-blue-500 to-blue-600 text-gray-50 font-semibold"}," Démarrer "),n.value?((0,r.wg)(),(0,r.iD)("div",h,(0,s.zw)(o.value),1)):(0,r.kq)("",!0)])):((0,r.wg)(),(0,r.iD)("div",g,(0,s.zw)(o.value),1))])}}});const w=m;var b=w,y=n(121),k={key:0},z={key:1},q=["id","value"],x=["for"],_=(0,r.aZ)({__name:"Quizz",setup:function(e){var t=this,n=(0,i.iH)(""),u=(0,i.iH)(""),c=(0,i.iH)(""),l=(0,i.iH)([]),d=localStorage.getItem("jwt"),f=(0,i.iH)(!0),v=function(){return(0,a.mG)(t,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),[4,y.Z.get("https://backend-quiz-dot-tools-303211.nw.r.appspot.com/quiz",{headers:{Authorization:"Bearer ".concat(d)}})];case 1:return e=o.sent(),200===e.status?(n.value=e.data.label,c.value=e.data.id,l.value=e.data.choices,console.log(e.data)):console.log("GET request failed with status: ",e.status),[3,4];case 2:return t=o.sent(),console.error("An error occurred during GET request: ",t),[3,4];case 3:return f.value=!1,[7];case 4:return[2]}}))}))},p=function(){return(0,a.mG)(t,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),console.log("quiz_uuid: ",c.value),console.log("choice_uuid: ",u.value),[4,y.Z.post("https://backend-quiz-dot-tools-303211.nw.r.appspot.com/quiz",{quiz_uuid:c.value,choice_uuid:u.value},{headers:{Authorization:"Bearer ".concat(d)}})];case 1:return e=n.sent(),e.status>=200&&e.status<300?console.log(e.data):(console.log("Response status: ",e.status),console.log("Response data: ",e.data),console.error("Erreur lors de l'envoi de la réponse")),[3,3];case 2:return t=n.sent(),console.error(t),console.error(t.response),console.error(t.response.data),[3,3];case 3:return[2]}}))}))};return(0,r.bv)(v),function(e,t){return(0,r.wg)(),(0,r.iD)("div",null,[f.value?((0,r.wg)(),(0,r.iD)("div",k,"Loading...")):((0,r.wg)(),(0,r.iD)("div",z,[(0,r._)("div",null,(0,s.zw)(n.value),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.value,(function(e,n){return(0,r.wg)(),(0,r.iD)("div",{key:e.id},[(0,r.wy)((0,r._)("input",{type:"radio",id:e.id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.value=e}),value:e.id},null,8,q),[[o.G2,u.value]]),(0,r._)("label",{for:e.id},(0,s.zw)(n+1)+". "+(0,s.zw)(e.value),9,x)])})),128)),(0,r._)("button",{class:"border bg-gray-600 rounded-md flex flex-col items-start space-y-2 p-2 px-6",onClick:p},"Valider")]))])}}});const O=_;var j=O;function D(e,t,n,o,r,u){return null}var G={data:function(){return{results:null}},created:function(){return(0,a.mG)(this,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=localStorage.getItem("jwt"),console.log(e),[4,y.Z.get("https://backend-quiz-dot-tools-303211.nw.r.appspot.com/quiz/score",{headers:{Authorization:"Bearer ".concat(e)}})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))}},S=n(744);const A=(0,S.Z)(G,[["render",D]]);var H=A,T={components:{Login:b,Quizz:j,Results:H}};const C=(0,S.Z)(T,[["render",u]]);var P=C,J=[{path:"/login",name:"Login",component:b},{path:"/quizz",name:"Quizz",component:j},{path:"/results",name:"Results",component:H},{path:"/:catchAll(.*)",redirect:"/login"}],Z=(0,l.p7)({history:(0,l.PO)(),routes:J}),E=Z;(0,o.ri)(P).use(E).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var u=t[o]={exports:{}};return e[o](u,u.exports,n),u.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,u){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],u=e[l][2];for(var s=!0,i=0;i<o.length;i++)(!1&u||a>=u)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(s=!1,u<a&&(a=u));if(s){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}u=u||0;for(var l=e.length;l>0&&e[l-1][2]>u;l--)e[l]=e[l-1];e[l]=[o,r,u]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,u,a=o[0],s=o[1],i=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(i)var l=i(n)}for(t&&t(o);c<a.length;c++)u=a[c],n.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return n.O(l)},o=self["webpackChunktest_technique"]=self["webpackChunktest_technique"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(576)}));o=n.O(o)})();
//# sourceMappingURL=app.a2d461bd.js.map